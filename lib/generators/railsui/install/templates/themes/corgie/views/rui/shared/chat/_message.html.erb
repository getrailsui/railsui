<%# locals: (user: false) %>

<% if user %>
<article class="relative group">
  <div class="flex justify-end mb-1">
    <div class="chat">
      <div class="prose prose-neutral dark:prose-invert" data-controller="markdown hightlight code-block" data-markdown-target="content">
        <%= yield %>
      </div>
    </div>
  </div>
  <div class="flex justify-end transition-opacity duration-300 opacity-0 group-hover:opacity-100">
    <button type="button" class="btn btn-ghost size-8 btn-rounded group" data-controller="railsui-tooltip" data-railsui-tooltip-content-value="Edit">
      <%= icon "pencil", custom_path: "/railsui/icons/pencil.svg", class: "size-4 stroke-current shrink-0 stroke-[2] stroke-neutral-500 group-hover:stroke-neutral-600 dark:group-hover:stroke-neutral-400 dark:hover:stroke-neutral-200" %>
      <span class="sr-only">Edit</span>
    </button>

    <button type="button" class="btn btn-ghost size-8 group btn-rounded" data-controller="railsui-tooltip railsui-clipboard" data-action="railsui-clipboard#copy" data-railsui-tooltip-content-value="Copy">
      <input type="hidden" data-railsui-clipboard-target="content" value="Message content goes here..." class="hidden" readonly>
      <%= icon "copy", custom_path: "/railsui/icons/copy.svg", class: "size-4 stroke-current shrink-0 stroke-[2] stroke-neutral-500 group-hover:stroke-neutral-600 dark:group-hover:stroke-neutral-400 dark:hover:stroke-neutral-200" %>
      <span class="sr-only">Copy</span>
    </button>
  </div>
</article>

<% else %>
<article class="relative w-full group">
  <div class="absolute top-0 flex flex-col transition-opacity duration-300 opacity-0 -left-10 group-hover:opacity-100">
    <button type="button" class="btn btn-ghost size-8 group btn-rounded" data-controller="railsui-tooltip railsui-clipboard" data-action="railsui-clipboard#copy" data-railsui-tooltip-content-value="Copy">
      <input type="hidden" data-railsui-clipboard-target="content" value="Message content goes here..." class="hidden" readonly>
      <%= icon "copy", custom_path: "/railsui/icons/copy.svg", class: "size-4 stroke-current shrink-0 stroke-[2] stroke-neutral-500 group-hover:stroke-neutral-600 dark:group-hover:stroke-neutral-400 dark:hover:stroke-neutral-200" %>
      <span class="sr-only">Copy</span>
    </button>
  </div>
  <div class="max-w-full pb-2 mb-2 prose prose-neutral dark:prose-invert border-neutral-300/80 dark:border-neutral-700/80 prose-pre:p-0 prose-pre:bg-transparent prose-pre:border dark:prose-pre:border-neutral-700/80" data-controller="markdown highlight code-block" data-markdown-target="content" data-highlight-target="code">
    <%= yield %>
  </div>

  <footer class="flex items-center gap-3">
    <button type="button" class="size-6 btn btn-rounded btn-ghost group" data-controller="railsui-tooltip" data-railsui-tooltip-content-value="Regenerate">
       <%= icon "arrow-path", class: "size-4 stroke-current shrink-0 stroke-neutral-500 stroke-[2] group-hover:stroke-neutral-600 dark:group-hover:stroke-neutral-400 dark:hover:stroke-neutral-200" %>

      <span class="sr-only">Regenerate</span>
    </button>

    <button type="button" class="size-6 btn btn-rounded btn-ghost group" data-controller="railsui-tooltip railsui-clipboard" data-action="railsui-clipboard#copy" data-railsui-tooltip-content-value="Copy">
      <input type="hidden" data-railsui-clipboard-target="content" value="Message content goes here..." class="hidden" readonly>
      <%= icon "copy", custom_path: "/railsui/icons/copy.svg", class: "size-4 stroke-current shrink-0 stroke-neutral-500 stroke-[2] group-hover:stroke-neutral-600 dark:group-hover:stroke-neutral-400 dark:hover:stroke-neutral-200" %>
      <span class="sr-only">Copy</span>
    </button>

    <button type="button" class="size-6 btn btn-rounded btn-ghost group" data-controller="railsui-tooltip railsui-clipboard" data-railsui-tooltip-content-value="Copy share link" data-action="railsui-clipboard#copy">
      <input type="hidden" data-railsui-clipboard-target="content" value="https://railsui.com/chat/XDRSLG" class="hidden" readonly>
       <%= icon "arrow-up-tray", class: "size-4 stroke-current shrink-0 stroke-neutral-500 stroke-[2] group-hover:stroke-neutral-600 dark:group-hover:stroke-neutral-400 dark:hover:stroke-neutral-200" %>
      <span class="sr-only">Share</span>
    </button>

    <button type="button" class="size-6 btn btn-rounded btn-ghost group" data-controller="railsui-tooltip" data-railsui-tooltip-content-value="Like">
       <%= icon "hand-thumb-up", class: "size-4 stroke-current shrink-0 stroke-neutral-500 stroke-[2] group-hover:stroke-neutral-600 dark:group-hover:stroke-neutral-400 dark:hover:stroke-neutral-200" %>
      <span class="sr-only">Like</span>
    </button>

    <button type="button" class="size-6 btn btn-rounded btn-ghost group" data-controller="railsui-tooltip" data-railsui-tooltip-content-value="Dislike">
      <%= icon "hand-thumb-down", class: "size-4 stroke-current shrink-0 stroke-neutral-500 stroke-[2] group-hover:stroke-neutral-600 dark:group-hover:stroke-neutral-400 dark:hover:stroke-neutral-200" %>
      <span class="sr-only">Dislike</span>
    </button>
  </footer>
</article>
<% end %>
