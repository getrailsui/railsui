<div class="<%= combobox_classes %>" <%= tag.attributes(html_attributes) %>>
  <!-- Hidden input for form submission -->
  <input type="hidden" name="<%= @name %>" data-railsui-combobox-target="hiddenInput">

  <!-- Combobox button -->
  <div aria-expanded="false"
       aria-controls="combobox-list"
       aria-labelledby="combobox-label"
       data-action="click->railsui-combobox#toggleDropdown keydown.enter->railsui-combobox#toggleDropdown"
       data-railsui-combobox-target="box"
       role="combobox"
       tabindex="0"
       class="form-input flex items-center justify-between pr-1.5 shadow-xs">
    <span id="combobox-label" class="sr-only"><%= @placeholder %></span>
    <span data-railsui-combobox-target="text"><%= @placeholder %></span>
    <%= icon "chevron-up-down", class: "stroke-gray-500 dark:stroke-gray-400 pointer-events-none size-5" %>
  </div>

  <!-- Dropdown -->
  <div data-railsui-combobox-target="list"
       data-transition-enter-from="opacity-0 scale-95"
       data-transition-enter-to="opacity-100 scale-100"
       data-transition-leave-from="opacity-100 scale-100"
       data-transition-leave-to="opacity-0 scale-95"
       data-action="keydown.esc->railsui-combobox#hideDropdown"
       class="absolute z-10 top-12 left-0 border border-gray-300/80 dark:border-gray-700/80 shadow-lg duration-200 origin-top hidden w-full rounded-md overflow-hidden bg-white dark:bg-gray-800"
       role="listbox"
       aria-labelledby="combobox-label">

    <!-- Search input -->
    <div class="p-2 bg-white dark:bg-gray-800">
      <label for="combobox-search" class="sr-only">Search</label>
      <div class="relative">
        <input id="combobox-search"
               type="text"
               placeholder="<%= @search_placeholder %>"
               autocomplete="off"
               aria-autocomplete="list"
               data-railsui-combobox-target="input"
               data-action="input->railsui-combobox#filter keydown->railsui-combobox#handleKeydown"
               class="form-input text-[15px] pl-8">
        <%= icon "magnifying-glass", class: "stroke-gray-400 dark:stroke-gray-500 size-5 absolute top-[11px] left-2" %>
      </div>
    </div>

    <!-- Options -->
    <ul role="presentation" class="bg-white dark:bg-gray-800">
      <% options.each do |option| %>
        <li <%= tag.attributes(option.html_attributes) %>>
          <%= option.label %>
          <span data-railsui-combobox-target="checkmark" class="hidden" aria-hidden="true">
            <%= icon "check", class: "text-gray-100 dark:text-gray-200 size-4" %>
          </span>
        </li>
      <% end %>
    </ul>

    <!-- No results message -->
    <div data-railsui-combobox-target="noresults"
         class="hidden px-4 py-2 text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800"
         aria-hidden="true">
      <%= @no_results_text %>
    </div>
  </div>
</div>