<div class="my-16">
  <%= render "railsui/shared/sticky_subhead", title: "Tabs", subtitle: "Pills" %>

<%= render preview "zinc" do %>
<div data-controller="tabs" data-tabs-active-tab="py-2 px-4 bg-primary-50 rounded-full text-primary-500 dark:bg-primary-500 dark:text-white" data-tabs-inactive-tab="py-2 px-4 rounded-full dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out">
  <div class="text-zinc-600 dark:text-zinc-300">
    <nav role="navigation" class="flex items-center space-x-1 text-[15px] font-heading font-normal">
      <a href="#" data-tabs-target="tab" data-action="click->tabs#change" class="py-2 px-4 bg-primary-50 rounded-full text-primary-500 dark:bg-primary-500 dark:text-white dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out">Activity</a>
      <a href="#" data-tabs-target="tab" data-action="click->tabs#change" class="py-2 px-4 rounded-full dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out">Account</a>
      <a href="#" data-tabs-target="tab" data-action="click->tabs#change" class="py-2 px-4 rounded-full dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out">Billing</a>
      <a href="#" data-tabs-target="tab" data-action="click->tabs#change" class="py-2 px-4 rounded-full dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out">Team</a>
    </nav>
  </div>
   <div class="p-4 prose prose-zinc dark:prose-invert" data-tabs-target="panel">
    <p>Some activities...</p>
  </div>

  <div class="hidden p-4 prose prose-zinc dark:prose-invert" data-tabs-target="panel">
    <p>Account information...</p>
  </div>

  <div class="hidden p-4 prose prose-zinc dark:prose-invert" data-tabs-target="panel">
    <p>Billing information...</p>
  </div>
  <div class="hidden p-4 prose prose-zinc dark:prose-invert" data-tabs-target="panel">
    <p>Team information...</p>
  </div>
</div>
<% end %>

<% content_for :html, flush: true do %>
<div data-controller="tabs" data-tabs-active-tab="py-2 px-4 bg-primary-50 rounded-full text-primary-500 dark:bg-primary-500 dark:text-white" data-tabs-inactive-tab="py-2 px-4 rounded-full dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out">
  <div class="text-zinc-600 dark:text-zinc-300">
     <nav role="navigation" class="flex items-center space-x-1 text-[15px] font-heading font-normal">
      <a href="#" data-tabs-target="tab" data-action="click->tabs#change" class="py-2 px-4 bg-primary-50 rounded-full text-primary-500 dark:bg-primary-500 dark:text-white dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out">Activity</a>
      <a href="#" data-tabs-target="tab" data-action="click->tabs#change" class="py-2 px-4 rounded-full dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out">Account</a>
      <a href="#" data-tabs-target="tab" data-action="click->tabs#change" class="py-2 px-4 rounded-full dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out">Billing</a>
      <a href="#" data-tabs-target="tab" data-action="click->tabs#change" class="py-2 px-4 rounded-full dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out">Team</a>
    </nav>
  </div>
   <div class="p-4 prose prose-zinc dark:prose-invert" data-tabs-target="panel">
    <p>Some activities...</p>
  </div>

  <div class="hidden p-4 prose prose-zinc dark:prose-invert" data-tabs-target="panel">
    <p>Account information...</p>
  </div>

  <div class="hidden p-4 prose prose-zinc dark:prose-invert" data-tabs-target="panel">
    <p>Billing information...</p>
  </div>
  <div class="hidden p-4 prose prose-zinc dark:prose-invert" data-tabs-target="panel">
    <p>Team information...</p>
  </div>
</div>
<% end %>

<% content_for :erb, flush: true do %>
<div data-controller="tabs" data-tabs-active-tab="py-2 px-4 bg-primary-50 rounded-full text-primary-500 dark:bg-primary-500 dark:text-white" data-tabs-inactive-tab="py-2 px-4 rounded-full dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out">
  <div class="text-zinc-600 dark:text-zinc-300">
    <nav role="navigation" class="flex items-center space-x-1 text-[15px] font-heading font-normal">
      <%%= link_to "Activity", "#", data: { action: "click->tabs#change", tabs_target: "tab" }, class: "py-2 px-4 bg-primary-50 rounded-full text-primary-500 dark:bg-primary-500 dark:text-white transition duration-200 ease-in-out" %>
      <%%= link_to "Account", "#", data: { action: "click->tabs#change", tabs_target: "tab" }, class: "py-2 px-4 rounded-full dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out" %>
      <%%= link_to "Billing", "#", data: { action: "click->tabs#change", tabs_target: "tab" }, class: "py-2 px-4 rounded-full dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out" %>
      <%%= link_to "Team", "#", data: { action: "click->tabs#change", tabs_target: "tab" }, class: "py-2 px-4 rounded-full dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out" %>
    </nav>
  </div>
   <div class="p-4 prose prose-zinc dark:prose-invert" data-tabs-target="panel">
    <p>Some activities...</p>
  </div>

  <div class="hidden p-4 prose prose-zinc dark:prose-invert" data-tabs-target="panel">
    <p>Account information...</p>
  </div>

  <div class="hidden p-4 prose prose-zinc dark:prose-invert" data-tabs-target="panel">
    <p>Billing information...</p>
  </div>
  <div class="hidden p-4 prose prose-zinc dark:prose-invert" data-tabs-target="panel">
    <p>Team information...</p>
  </div>
</div>
<% end %>

<% content_for :haml, flush: true do %>
%div{"data-controller" => "tabs", "data-tabs-active-tab" => "py-2 px-4 bg-primary-50 rounded-full text-primary-500 dark:bg-primary-500 dark:text-white", "data-tabs-inactive-tab" => "py-2 px-4 rounded-full dark:bg-transparent dark:hover:bg-zinc-800/75"}
  .text-zinc-600.dark:text-zinc-300
    %nav.flex.items-center.space-x-1.font-heading.font-normal{class: "text-[15px]", role: "navigation"}
      = link_to "Activity", "#", data: { action: "click->tabs#change", tabs_target: "tab" }, class: "py-2 px-4 bg-primary-50 rounded-full text-primary-500 dark:bg-primary-500 dark:text-white transition duration-200 ease-in-out"
      = link_to "Account", "#", data: { action: "click->tabs#change", tabs_target: "tab" }, class: "py-2 px-4 rounded-full dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out"
      = link_to "Billing", "#", data: { action: "click->tabs#change", tabs_target: "tab" }, class: "py-2 px-4 rounded-full dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out"
      = link_to "Team", "#", data: { action: "click->tabs#change", tabs_target: "tab" }, class: "py-2 px-4 rounded-full dark:hover:bg-zinc-800/75 transition duration-200 ease-in-out"
  .p-4.prose.prose-zinc.dark:prose-invert{"data-tabs-target" => "panel"}
    %p Some activities...
  .hidden.p-4.prose.prose-zinc.dark:prose-invert{"data-tabs-target" => "panel"}
    %p Account information...
  .hidden.p-4.prose.prose-zinc.dark:prose-invert{"data-tabs-target" => "panel"}
    %p Billing information...
  .hidden.p-4.prose.prose-zinc.dark:prose-invert{"data-tabs-target" => "panel"}
    %p Team information...
<% end %>

<% content_for :js, flush: true do %>
// Credit @excid3 and crew
// https://github.com/excid3/tailwindcss-stimulus-components/graphs/contributors

import { Controller } from '@hotwired/stimulus'

export default class extends Controller {
  static targets = ['tab', 'panel']

  connect() {
    this.activeTabClasses = (this.data.get('activeTab') || 'active').split(' ')
    this.inactiveTabClasses = (this.data.get('inactiveTab') || 'inactive').split(' ')
  }

  change(event) {
    event.preventDefault()

    // If target specifies an index, use that
    if (event.currentTarget.dataset.index) {
      this.index = event.currentTarget.dataset.index

    // If target specifies an id, use that
    } else if (event.currentTarget.dataset.id) {
      this.index = this.tabTargets.findIndex((tab) => tab.id == event.currentTarget.dataset.id)

    // Otherwise, use the index of the current target
    } else {
      this.index = this.tabTargets.indexOf(event.currentTarget)
    }
  }

  showTab() {
    this.tabTargets.forEach((tab, index) => {
      const panel = this.panelTargets[index]

      if (index === this.index) {
        panel.classList.remove('hidden')
        tab.classList.remove(...this.inactiveTabClasses)
        tab.classList.add(...this.activeTabClasses)
      } else {
        panel.classList.add('hidden')
        tab.classList.remove(...this.activeTabClasses)
        tab.classList.add(...this.inactiveTabClasses)
      }
    })
  }

  get index() {
    return parseInt(this.data.get('index') || 0)
  }

  set index(value) {
    this.data.set('index', (value >= 0 ? value : 0))
    this.showTab()
  }
}
<% end %>

<%= render_snippet html_filename: "tabs.html", erb_filename: "_tabs.html.erb", haml_filename: "_tabs.html.haml", js_filename: "tabs_controller.js" %>
